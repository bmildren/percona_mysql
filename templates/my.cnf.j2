### {{ ansible_managed }}
[client]
socket                                = /var/run/mysqld/mysqld.sock

[mysqld]
### General options
user                                  = {{ percona_mysql_service_user  }}
pid-file                              = /var/run/mysqld/mysqld.pid
socket                                = /var/run/mysqld/mysqld.sock
basedir                               = {{ percona_mysql_base_dir }}
datadir                               = {{ percona_mysql_data_dir }}
tmpdir                                = {{ percona_mysql_tmp_dir }}
character-set-server                  = {{ percona_mysql_character_set_server }}
collation-server                      = {{ percona_mysql_collation_server }}
sql-mode                              = {{ percona_mysql_sql_mode }}
default_storage_engine                = {{ percona_mysqL_default_storage_engine }}
transaction-isolation                 = {{ percona_mysql_transaction_isolation }}
sysdate-is-now                        = {{ percona_mysql_sysdate_is_now }}
expand_fast_index_creation            = {{ percona_mysql_expand_fast_index_creation }}
safe-user-create                      = {{ percona_mysql_safe_user_create }}
query_response_time_stats             = {{ percona_mysql_query_response_time_stats }}
event-scheduler                       = {{ percona_mysql_event_scheduler }}
performance_schema                    = {{ percona_mysql_performance_schema }}

### Connectivity options
read_only                             = {{ percona_mysql_read_only }}
bind-address                          = {{ percona_mysql_bind_address }}
port                                  = {{ percona_mysql_port }}
net_write_timeout                     = {{ percona_mysql_net_write_timeout }}
interactive_timeout                   = {{ percona_mysql_interactive_timeout }}
wait_timeout                          = {{ percona_mysql_wait_timeout }}
skip-name-resolve                     = {{ percona_mysql_skip_name_resolve }}
secure-auth                           = {{ percona_mysql_secure_auth }}
max_allowed_packet                    = {{ percona_mysql_max_allowed_packet }}
back_log                              = {{ percona_mysql_back_log }}
thread_cache_size                     = {{ percona_mysql_thread_cache_size }}
max_connections                       = {{ percona_mysql_max_connections }}
max_user_connections                  = {{ percona_mysql_max_user_connections }}
max_connect_errors                    = {{ percona_mysql_max_connect_errors }}

### General caches
key_buffer_size                       = {{ percona_mysql_key_buffer_size }}
query_cache_type                      = {{ percona_mysql_query_cache_type }}
query_cache_size                      = {{ percona_mysql_query_cache_size }}
table_open_cache                      = {{ percona_mysql_table_open_cache }}
tmp_table_size                        = {{ percona_mysql_tmp_table_size }}
max_heap_table_size                   = {{ percona_mysql_max_heap_table_size }}

### InnoDB options
innodb                                = {{ percona_mysql_innodb }}
innodb_buffer_pool_size               = {{ percona_mysql_innodb_buffer_pool_size_mb }}M
innodb_buffer_pool_instances          = {{ percona_mysql_innodb_buffer_pool_instances }}
innodb_old_blocks_time                = {{ percona_mysql_innodb_old_blocks_time }}
innodb_log_buffer_size                = {{ percona_mysql_innodb_log_buffer_size }}
innodb_flush_log_at_trx_commit        = {{ percona_mysql_innodb_flush_log_at_trx_commit }}
innodb_flush_method                   = {{ percona_mysql_innodb_flush_method }}
innodb_io_capacity                    = {{ percona_mysql_innodb_io_capacity }}
innodb_log_file_size                  = {{ percona_mysql_innodb_log_file_size }}
innodb_file_per_table                 = {{ percona_mysql_innodb_file_per_table }}
innodb_open_files                     = {{ percona_mysql_innodb_open_files }}
innodb_file_format                    = {{ percona_mysql_innodb_file_format }}
innodb_file_format_max                = {{ percona_mysql_innodb_file_format_max }}
innodb_write_io_threads               = {{ percona_mysql_innodb_write_io_threads }}
innodb_read_io_threads                = {{ percona_mysql_innodb_read_io_threads }}
innodb_thread_concurrency             = {{ percona_mysql_innodb_thread_concurrency }}
innodb_concurrency_tickets            = {{ percona_mysql_innodb_concurrency_tickets }}
innodb_support_xa                     = {{ percona_mysql_innodb_support_xa }}
innodb_autoinc_lock_mode              = {{ percona_mysql_innodb_autoinc_lock_mode }}
innodb_stats_on_metadata              = {{ percona_mysql_innodb_stats_on_metadata }}

### Replication options
server-id                             = {{ percona_mysql_server_id|default(1) }}
auto_increment_increment              = {{ percona_mysql_auto_increment_increment }}
auto_increment_offset                 = {{ percona_mysql_auto_increment_offset }}
skip-slave-start                      = {{ percona_mysql_skip_slave_start }}
master-info-file                      = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_master_info_file }}
log-bin                               = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_log_bin }}
log-bin-index                         = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_log_bin_index }}
max_binlog_size                       = {{ percona_mysql_max_binlog_size }}
log-slave-updates                     = {{ percona_mysql_log_slave_updates }}
binlog-format                         = {{ percona_mysql_binlog_format }}
sync_binlog                           = {{ percona_mysql_sync_binlog }}
expire_logs_days                      = {{ percona_mysql_expire_logs_days }}
relay-log-info-file                   = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_relay_log_info_file }}
relay-log                             = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_relay_log }}
relay-log-index                       = {{ percona_mysql_binlog_dir }}/{{ percona_mysql_relay_log_purge }}
relay_log_purge                       = {{ percona_mysql_relay_log_purge }}

### Logging options
log-error                             = {{ percona_mysql_log_dir }}/{{ percona_mysql_log_error }}
general-log                           = {{ percona_mysql_general_log }}
general_log_file                      = {{ percona_mysql_log_dir }}/{{ percona_mysql_general_log_file }}
slow-query-log                        = {{ percona_mysql_slow_query_log }}
slow_query_log_file                   = {{ percona_mysql_log_dir }}/{{ percona_mysql_slow_query_log_file }}
slow_query_log_use_global_control     = {{ percona_mysql_slow_query_log_use_global_control }}
long_query_time                       = {{ percona_mysql_long_query_time }}
log-slow-slave-statements             = {{ percona_mysql_log_slow_slave_statements }}
log-slow-admin-statements             = {{ percona_mysql_log_slow_admin_statements }}
log_slow_sp_statements                = {{ percona_mysql_log_slow_sp_statements }}
slow_query_log_timestamp_always       = {{ percona_mysql_slow_query_log_timestamp_always }}
slow_query_log_timestamp_precision    = {{ percona_mysql_slow_query_log_timestamp_precision }}
log_slow_verbosity                    = {{ percona_mysql_log_slow_verbosity }}
log_slow_filter                       = {{ percona_mysql_slow_filter }}
log_slow_rate_type                    = {{ percona_mysql_log_slow_rate_type }}
log_slow_rate_limit                   = {{ percona_mysql_log_slow_rate_limit }}
slow_query_log_always_write_time      = {{ percona_mysql_slow_query_log_always_write_time }}

[mysqld_safe]
log-error                             = {{ percona_mysql_log_dir }}/mysql_error.log
